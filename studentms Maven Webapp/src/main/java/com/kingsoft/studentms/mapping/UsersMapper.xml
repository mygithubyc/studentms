<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kingsoft.studentms.dao.IUsersDao">
	<resultMap type="com.kingsoft.studentms.model.Users" id="users">
		<result column="usid" property="usid" jdbcType="INTEGER" />
		<result column="username" property="username" jdbcType="VARCHAR" />
		<result column="password" property="password" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="sex" property="sex" jdbcType="VARCHAR" />
		<result column="phonenum" property="phonenum" jdbcType="VARCHAR" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="userType" property="userType" jdbcType="VARCHAR" />
	</resultMap>
	<!-- 配置接口IUsersDao里面的方法 -->

	<!-- my登录方法 -->
	<select id="getUserByUsername" resultMap="users" parameterType="java.lang.String">
		SELECT * from(SELECT * from users where username=#{username,jdbcType=VARCHAR} and
		userType=#{userType,jdbcType=VARCHAR}) where ROWNUM BETWEEN 0 and 1
	</select>

	<!-- 登录方法 -->
	<select id="login" resultType="com.kingsoft.studentms.model.Users">
		select * from users where username=#{username,jdbcType=VARCHAR} and 
		password=#{password,jdbcType=VARCHAR}
	</select>
	<!-- 注册检查方法 -->
	<select id="cheackRegister" resultType="com.kingsoft.studentms.model.Users">
		select * from users where username=#{username,jdbcType=VARCHAR}
	</select>
	<!-- 注册方法 -->
	<insert id="register">
		insert into users(username,password,usertype) 
		values(#{user.username,jdbcType=VARCHAR},
		#{user.password,jdbcType=VARCHAR},#{user.userType,jdbcType=VARCHAR})
	</insert>
</mapper>
